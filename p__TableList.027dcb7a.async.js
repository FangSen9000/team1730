(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[947],{19032:function(ce,A,s){"use strict";s.r(A),s.d(A,{default:function(){return ne}});var fe=s(57338),O=s(25084),me=s(57663),C=s(71577),ge=s(47673),W=s(4107),G=s(93224),T=s(2824),R=s(11849),he=s(34792),g=s(48086),v=s(3182),Y=s(94043),i=s.n(Y),z=s(49101),b=s(67294),t=s(43581),K=s(81907),J=s(85224),Q=s(92598),X=s(37476),D=s(5966),V=s(90672),k=s(96459),pe=s(71194),q=s(50146),F=s(3843),H=s(64317),_=s(86615),ee=s(22452),e=s(85893),ae=f=>{var r=(0,t.YB)();return(0,e.jsxs)(F.Z,{stepsProps:{size:"small"},stepsFormRender:(d,u)=>(0,e.jsx)(q.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:r.formatMessage({id:"pages.searchTable.updateForm.ruleConfig",defaultMessage:"\u89C4\u5219\u914D\u7F6E"}),visible:f.updateModalVisible,footer:u,onCancel:()=>{f.onCancel()},children:d}),onFinish:f.onSubmit,children:[(0,e.jsxs)(F.Z.StepForm,{initialValues:{name:f.values.name,desc:f.values.desc},title:r.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,e.jsx)(D.Z,{name:"name",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u89C4\u5219\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"})}]}),(0,e.jsx)(V.Z,{name:"desc",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:r.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]}),(0,e.jsxs)(F.Z.StepForm,{initialValues:{target:"0",template:"0"},title:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.title",defaultMessage:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027"}),children:[(0,e.jsx)(H.Z,{name:"target",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(H.Z,{name:"template",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.templateLabel",defaultMessage:"\u89C4\u5219\u6A21\u677F"}),valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(_.Z.Group,{name:"type",label:r.formatMessage({id:"pages.searchTable.updateForm.ruleProps.typeLabel",defaultMessage:"\u89C4\u5219\u7C7B\u578B"}),options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(F.Z.StepForm,{initialValues:{type:"1",frequency:"month"},title:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.title",defaultMessage:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F"}),children:[(0,e.jsx)(ee.Z,{name:"time",width:"md",label:r.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.timeLabel",defaultMessage:"\u5F00\u59CB\u65F6\u95F4"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.updateForm.schedulingPeriod.timeRules",defaultMessage:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"})}]}),(0,e.jsx)(H.Z,{name:"frequency",label:r.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},se=ae,y=s(5029),te=function(){var f=(0,v.Z)(i().mark(function r(d){var u;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u=g.default.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,(0,y.HP)((0,R.Z)({},d));case 4:return u(),g.default.success("Added successfully"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),u(),g.default.error("Adding failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},r,null,[[1,9]])}));return function(d){return f.apply(this,arguments)}}(),re=function(){var f=(0,v.Z)(i().mark(function r(d){var u;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u=g.default.loading("Configuring"),a.prev=1,a.next=4,(0,y.D7)({name:d.name,desc:d.desc,key:d.key});case 4:return u(),g.default.success("Configuration is successful"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),u(),g.default.error("Configuration failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},r,null,[[1,9]])}));return function(d){return f.apply(this,arguments)}}(),le=function(){var f=(0,v.Z)(i().mark(function r(d){var u;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(u=g.default.loading("\u6B63\u5728\u5220\u9664"),d){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,y.DV)({key:d.map(P=>P.key)});case 6:return u(),g.default.success("Deleted successfully and will refresh soon"),a.abrupt("return",!0);case 11:return a.prev=11,a.t0=a.catch(3),u(),g.default.error("Delete failed, please try again"),a.abrupt("return",!1);case 16:case"end":return a.stop()}},r,null,[[3,11]])}));return function(d){return f.apply(this,arguments)}}(),ue=()=>{var f=(0,b.useState)(!1),r=(0,T.Z)(f,2),d=r[0],u=r[1],Z=(0,b.useState)(!1),a=(0,T.Z)(Z,2),P=a[0],w=a[1],de=(0,b.useState)(!1),B=(0,T.Z)(de,2),E=B[0],N=B[1],M=(0,b.useRef)(),ie=(0,b.useState)(),$=(0,T.Z)(ie,2),m=$[0],x=$[1],oe=(0,b.useState)([]),I=(0,T.Z)(oe,2),j=I[0],L=I[1],S=(0,t.YB)(),U=[{title:(0,e.jsx)(t._H,{id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"Rule name"}),dataIndex:"name",tip:"The rule name is the unique key",render:(n,l)=>(0,e.jsx)("a",{onClick:()=>{x(l),N(!0)},children:n})},{title:(0,e.jsx)(t._H,{id:"pages.searchTable.titleDesc",defaultMessage:"Description"}),dataIndex:"desc",valueType:"textarea"},{title:(0,e.jsx)(t._H,{id:"pages.searchTable.titleCallNo",defaultMessage:"Number of service calls"}),dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:n=>"".concat(n).concat(S.formatMessage({id:"pages.searchTable.tenThousand",defaultMessage:" \u4E07 "}))},{title:(0,e.jsx)(t._H,{id:"pages.searchTable.titleStatus",defaultMessage:"Status"}),dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:(0,e.jsx)(t._H,{id:"pages.searchTable.nameStatus.default",defaultMessage:"Shut down"}),status:"Default"},1:{text:(0,e.jsx)(t._H,{id:"pages.searchTable.nameStatus.running",defaultMessage:"Running"}),status:"Processing"},2:{text:(0,e.jsx)(t._H,{id:"pages.searchTable.nameStatus.online",defaultMessage:"Online"}),status:"Success"},3:{text:(0,e.jsx)(t._H,{id:"pages.searchTable.nameStatus.abnormal",defaultMessage:"Abnormal"}),status:"Error"}}},{title:(0,e.jsx)(t._H,{id:"pages.searchTable.titleUpdatedAt",defaultMessage:"Last scheduled time"}),sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:(n,l,o)=>{var h=l.defaultRender,p=(0,G.Z)(l,["defaultRender"]),c=o.getFieldValue("status");return"".concat(c)==="0"?!1:"".concat(c)==="3"?(0,e.jsx)(W.Z,(0,R.Z)((0,R.Z)({},p),{},{placeholder:S.formatMessage({id:"pages.searchTable.exception",defaultMessage:"Please enter the reason for the exception!"})})):h(n)}},{title:(0,e.jsx)(t._H,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:(n,l)=>[(0,e.jsx)("a",{onClick:()=>{w(!0),x(l)},children:(0,e.jsx)(t._H,{id:"pages.searchTable.config",defaultMessage:"Configuration"})},"config"),(0,e.jsx)("a",{href:"https://procomponents.ant.design/",children:(0,e.jsx)(t._H,{id:"pages.searchTable.subscribeAlert",defaultMessage:"Subscribe to alerts"})},"subscribeAlert")]}];return(0,e.jsxs)(K.ZP,{children:[(0,e.jsx)(Q.ZP,{headerTitle:S.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:M,rowKey:"key",search:{labelWidth:120},toolBarRender:()=>[(0,e.jsxs)(C.Z,{type:"primary",onClick:()=>{u(!0)},children:[(0,e.jsx)(z.Z,{})," ",(0,e.jsx)(t._H,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")],request:y.jR,columns:U,rowSelection:{onChange:(n,l)=>{L(l)}}}),(j==null?void 0:j.length)>0&&(0,e.jsxs)(J.Z,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(t._H,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:j.length})," ",(0,e.jsx)(t._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,e.jsxs)("span",{children:[(0,e.jsx)(t._H,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",j.reduce((n,l)=>n+l.callNo,0)," ",(0,e.jsx)(t._H,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:[(0,e.jsx)(C.Z,{onClick:(0,v.Z)(i().mark(function n(){var l,o;return i().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,le(j);case 2:L([]),(l=M.current)===null||l===void 0||(o=l.reloadAndRest)===null||o===void 0||o.call(l);case 4:case"end":return p.stop()}},n)})),children:(0,e.jsx)(t._H,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})}),(0,e.jsx)(C.Z,{type:"primary",children:(0,e.jsx)(t._H,{id:"pages.searchTable.batchApproval",defaultMessage:"Batch approval"})})]}),(0,e.jsxs)(X.Z,{title:S.formatMessage({id:"pages.searchTable.createForm.newRule",defaultMessage:"New rule"}),width:"400px",visible:d,onVisibleChange:u,onFinish:function(){var n=(0,v.Z)(i().mark(function l(o){var h;return i().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,te(o);case 2:h=c.sent,h&&(u(!1),M.current&&M.current.reload());case 4:case"end":return c.stop()}},l)}));return function(l){return n.apply(this,arguments)}}(),children:[(0,e.jsx)(D.Z,{rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],width:"md",name:"name"}),(0,e.jsx)(V.Z,{width:"md",name:"desc"})]}),(0,e.jsx)(se,{onSubmit:function(){var n=(0,v.Z)(i().mark(function l(o){var h;return i().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,re(o);case 2:h=c.sent,h&&(w(!1),x(void 0),M.current&&M.current.reload());case 4:case"end":return c.stop()}},l)}));return function(l){return n.apply(this,arguments)}}(),onCancel:()=>{w(!1),E||x(void 0)},updateModalVisible:P,values:m||{}}),(0,e.jsx)(O.Z,{width:600,visible:E,onClose:()=>{x(void 0),N(!1)},closable:!1,children:(m==null?void 0:m.name)&&(0,e.jsx)(k.Z,{column:2,title:m==null?void 0:m.name,request:(0,v.Z)(i().mark(function n(){return i().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",{data:m||{}});case 1:case"end":return o.stop()}},n)})),params:{id:m==null?void 0:m.name},columns:U})})]})},ne=ue}}]);
